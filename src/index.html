<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cervical Cancer Risk Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-r from-pink-100 to-rose-100 flex justify-center items-center min-h-screen p-4">
    <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl transition-transform hover:scale-105">
        <h1 class="text-2xl font-semibold text-center text-pink-600 mb-6">Cervical Cancer Risk Predictor</h1>
        <form id="cancerForm" class="space-y-4">
            <div>
                <label for="age" class="block text-gray-700 text-sm font-bold mb-2">Age:</label>
                <input type="number" id="age" name="age" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="age-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="sexualPartners" class="block text-gray-700 text-sm font-bold mb-2">Number of Sexual Partners:</label>
                <input type="number" id="sexualPartners" name="sexualPartners" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="sexualPartners-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="firstIntercourse" class="block text-gray-700 text-sm font-bold mb-2">First Sexual Intercourse Age:</label>
                <input type="number" id="firstIntercourse" name="firstIntercourse" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="firstIntercourse-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="pregnancies" class="block text-gray-700 text-sm font-bold mb-2">Number of Pregnancies:</label>
                <input type="number" id="pregnancies" name="pregnancies" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="pregnancies-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="smokes" class="block text-gray-700 text-sm font-bold mb-2">Smokes:</label>
                <select id="smokes" name="smokes" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="smokes-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="smokesYears" class="block text-gray-700 text-sm font-bold mb-2">Smokes (Years):</label>
                <input type="number" id="smokesYears" name="smokesYears" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="smokesYears-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="smokesPacks" class="block text-gray-700 text-sm font-bold mb-2">Smokes (Packs/Year):</label>
                <input type="number" id="smokesPacks" name="smokesPacks" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="smokesPacks-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="hormonalContraceptives" class="block text-gray-700 text-sm font-bold mb-2">Hormonal Contraceptives:</label>
                <select id="hormonalContraceptives" name="hormonalContraceptives" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="hormonalContraceptives-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="hormonalContraceptivesYears" class="block text-gray-700 text-sm font-bold mb-2">Hormonal Contraceptives (Years):</label>
                <input type="number" id="hormonalContraceptivesYears" name="hormonalContraceptivesYears" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="hormonalContraceptivesYears-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="iud" class="block text-gray-700 text-sm font-bold mb-2">IUD:</label>
                <select id="iud" name="iud" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="iud-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="iudYears" class="block text-gray-700 text-sm font-bold mb-2">IUD (Years):</label>
                <input type="number" id="iudYears" name="iudYears" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="iudYears-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="std" class="block text-gray-700 text-sm font-bold mb-2">STDs:</label>
                <select id="std" name="std" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="std-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdNumber" class="block text-gray-700 text-sm font-bold mb-2">STDs: Number of ever diagnosed:</label>
                <input type="number" id="stdNumber" name="stdNumber" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="stdNumber-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdCondylomatosis" class="block text-gray-700 text-sm font-bold mb-2">STDs: Condylomatosis:</label>
                <select id="stdCondylomatosis" name="stdCondylomatosis" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdCondylomatosis-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
             <div>
                <label for="stdGenitalHerpes" class="block text-gray-700 text-sm font-bold mb-2">STDs: Genital Herpes:</label>
                <select id="stdGenitalHerpes" name="stdGenitalHerpes" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdGenitalHerpes-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdTrichomoniasis" class="block text-gray-700 text-sm font-bold mb-2">STDs: Trichomoniasis:</label>
                <select id="stdTrichomoniasis" name="stdTrichomoniasis" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdTrichomoniasis-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdPelvicInflammatoryDisease" class="block text-gray-700 text-sm font-bold mb-2">STDs: Pelvic Inflammatory Disease:</label>
                <select id="stdPelvicInflammatoryDisease" name="stdPelvicInflammatoryDisease" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdPelvicInflammatoryDisease-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdGenitalWarts" class="block text-gray-700 text-sm font-bold mb-2">STDs: Genital Warts:</label>
                <select id="stdGenitalWarts" name="stdGenitalWarts" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdGenitalWarts-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdMolluscumContagiosum" class="block text-gray-700 text-sm font-bold mb-2">STDs: Molluscum Contagiosum:</label>
                <select id="stdMolluscumContagiosum" name="stdMolluscumContagiosum" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdMolluscumContagiosum-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdAIDS" class="block text-gray-700 text-sm font-bold mb-2">STDs: AIDS:</label>
                <select id="stdAIDS" name="stdAIDS" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdAIDS-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdHIV" class="block text-gray-700 text-sm font-bold mb-2">STDs: HIV:</label>
                <select id="stdHIV" name="stdHIV" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdHIV-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
             <div>
                <label for="stdHepatitisB" class="block text-gray-700 text-sm font-bold mb-2">STDs: Hepatitis B:</label>
                <select id="stdHepatitisB" name="stdHepatitisB" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdHepatitisB-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdHepatitisC" class="block text-gray-700 text-sm font-bold mb-2">STDs: Hepatitis C:</label>
                <select id="stdHepatitisC" name="stdHepatitisC" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdHepatitisC-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdSyphilis" class="block text-gray-700 text-sm font-bold mb-2">STDs: Syphilis:</label>
                <select id="stdSyphilis" name="stdSyphilis" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                </select>
                <div id="stdSyphilis-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdFirstDiagnosis" class="block text-gray-700 text-sm font-bold mb-2">STDs: Time since first diagnosis:</label>
                <input type="number" id="stdFirstDiagnosis" name="stdFirstDiagnosis"  class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="stdFirstDiagnosis-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>
            <div>
                <label for="stdLastDiagnosis" class="block text-gray-700 text-sm font-bold mb-2">STDs: Time since last diagnosis:</label>
                <input type="number" id="stdLastDiagnosis" name="stdLastDiagnosis" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <div id="stdLastDiagnosis-error" class="text-red-500 text-xs italic" style="display: none;"></div>
            </div>

            <button type="submit" class="bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline transition-colors duration-300 w-full">Predict Biopsy Result</button>
        </form>
        <div id="result" class="mt-6 text-center text-lg font-semibold text-gray-800" style="display: none;">
            Prediction: <span id="prediction" class="text-pink-600"></span>
        </div>
        <div id="error-message" class="mt-4 text-center text-red-600 font-semibold" style="display: none;"></div>
    </div>

    <script>
        document.getElementById('cancerForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Reset error messages
            document.getElementById('error-message').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            resetValidationErrors();

            // Validate inputs
            let hasErrors = false;
            const age = validateNumber('age', 'Age is required and must be a number.');
            const sexualPartners = validateNumber('sexualPartners', 'Number of sexual partners is required and must be a number.');
            const firstIntercourse = validateNumber('firstIntercourse', 'First sexual intercourse age is required and must be a number.');
            const pregnancies = validateNumber('pregnancies', 'Number of pregnancies is required and must be a number.');
            const smokes = validateSelect('smokes', 'Please select whether the patient smokes.');
            const smokesYears = validateNumber('smokesYears', 'Smokes (years) is required and must be a number.');
            const smokesPacks = validateNumber('smokesPacks', 'Smokes (packs/year) is required and must be a number.');
            const hormonalContraceptives = validateSelect('hormonalContraceptives', 'Please select whether the patient uses hormonal contraceptives.');
            const hormonalContraceptivesYears = validateNumber('hormonalContraceptivesYears', 'Hormonal contraceptives (years) is required and must be a number.');
            const iud = validateSelect('iud', 'Please select whether the patient uses an IUD.');
            const iudYears = validateNumber('iudYears', 'IUD (years) is required and must be a number.');
            const std = validateSelect('std', 'Please select whether the patient has STDs.');
            const stdNumber = validateNumber('stdNumber', 'STDs: Number of ever diagnosed is required and must be a number.');
            const stdCondylomatosis = validateSelect('stdCondylomatosis', 'Please select whether the patient has STDs: Condylomatosis.');
            const stdGenitalHerpes = validateSelect('stdGenitalHerpes', 'Please select whether the patient has STDs: Genital Herpes.');
            const stdTrichomoniasis = validateSelect('stdTrichomoniasis', 'Please select whether the patient has STDs: Trichomoniasis.');
            const stdPelvicInflammatoryDisease = validateSelect('stdPelvicInflammatoryDisease', 'Please select whether the patient has STDs: Pelvic Inflammatory Disease.');
            const stdGenitalWarts = validateSelect('stdGenitalWarts', 'Please select whether the patient has STDs: Genital Warts.');
            const stdMolluscumContagiosum = validateSelect('stdMolluscumContagiosum', 'Please select whether the patient has STDs: Molluscum Contagiosum.');
            const stdAIDS = validateSelect('stdAIDS', 'Please select whether the patient has STDs: AIDS.');
            const stdHIV = validateSelect('stdHIV', 'Please select whether the patient has STDs: HIV.');
            const stdHepatitisB = validateSelect('stdHepatitisB', 'Please select whether the patient has STDs: Hepatitis B.');
            const stdHepatitisC = validateSelect('stdHepatitisC', 'Please select whether the patient has STDs: Hepatitis C.');
            const stdSyphilis = validateSelect('stdSyphilis', 'Please select whether the patient has STDs: Syphilis.');
            const stdFirstDiagnosis = validateNumber('stdFirstDiagnosis', 'STDs: Time since first diagnosis is required and must be a number.');
            const stdLastDiagnosis = validateNumber('stdLastDiagnosis', 'STDs: Time since last diagnosis is required and must be a number.');

            if (hasErrors) {
                return;
            }
            // Collect form data
            const formData = {
                age: age,
                sexualPartners: sexualPartners,
                firstIntercourse: firstIntercourse,
                pregnancies: pregnancies,
                smokes: smokes,
                smokesYears: smokesYears,
                smokesPacks: smokesPacks,
                hormonalContraceptives: hormonalContraceptives,
                hormonalContraceptivesYears: hormonalContraceptivesYears,
                iud: iud,
                iudYears: iudYears,
                std: std,
                stdNumber: stdNumber,
                stdCondylomatosis: stdCondylomatosis,
                stdGenitalHerpes: stdGenitalHerpes,
                stdTrichomoniasis: stdTrichomoniasis,
                stdPelvicInflammatoryDisease: stdPelvicInflammatoryDisease,
                stdGenitalWarts: stdGenitalWarts,
                stdMolluscumContagiosum: stdMolluscumContagiosum,
                stdAIDS: stdAIDS,
                stdHIV: stdHIV,
                stdHepatitisB: stdHepatitisB,
                stdHepatitisC: stdHepatitisC,
                stdSyphilis: stdSyphilis,
                stdFirstDiagnosis: stdFirstDiagnosis,
                stdLastDiagnosis: stdLastDiagnosis
            };

            // Send data to server for prediction
            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    document.getElementById('error-message').textContent = data.error;
                    document.getElementById('error-message').style.display = 'block';
                } else {
                    document.getElementById('prediction').textContent = data.result === 0 ? 'Negative' : 'Positive';
                    document.getElementById('result').style.display = 'block';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('error-message').textContent = 'An error occurred while communicating with the server.';
                document.getElementById('error-message').style.display = 'block';
            });
        });

        function validateNumber(inputId, errorMessage) {
            const inputElement = document.getElementById(inputId);
            const errorElement = document.getElementById(inputId + '-error');
            const value = Number(inputElement.value);

            if (isNaN(value)) {
                errorElement.textContent = errorMessage;
                errorElement.style.display = 'block';
                return NaN;
            } else {
                errorElement.style.display = 'none';
                return value;
            }
        }

        function validateSelect(selectId, errorMessage) {
            const selectElement = document.getElementById(selectId);
            const errorElement = document.getElementById(selectId + '-error');
            const value = selectElement.value;

            if (value === "") {
                errorElement.textContent = errorMessage;
                errorElement.style.display = 'block';
                return "";
             } else {
                errorElement.style.display = 'none';
                return parseInt(value);
             }
        }

        function resetValidationErrors() {
            const errorElements = document.querySelectorAll('.text-red-500');
errorElements.forEach(errorElement => {
                errorElement.style.display = 'none';
                errorElement.textContent = ''; // Clear error message
            });
        }
    </script>
</body>
</html>
